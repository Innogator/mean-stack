{"filter":false,"title":"facebook.js","tooltip":"/config/strategies/facebook.js","undoManager":{"mark":2,"position":2,"stack":[[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":1,"column":332},"action":"insert","lines":["var passport = require('passport'), url = require('url'), FacebookStrategy = require('passport-facebook').Strategy, config = require('../config'), users = require('../../app/controllers/users.server.controller'); module.exports = function() { passport.use(new FacebookStrategy({ clientID: config.facebook.clientID, clientSecret: config.facebook.clientSecret, callbackURL: config.facebook.callbackURL, passReqToCallback: true }, function(req, accessToken, refreshToken, profile, done) { var providerData = profile._json; providerData.accessToken = accessToken; providerData.refreshToken = refreshToken;","var providerUserProfile = { firstName: profile.name.givenName, lastName: profile.name.familyName, fullName: profile.displayName, email: profile.emails[0].value, username: profile.username, provider: 'facebook', providerId: profile.id, providerData: providerData }; users.saveOAuthUserProfile(req, providerUserProfile, done); })); };"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":35},"end":{"row":1,"column":3},"action":"insert","lines":["","   "]},{"start":{"row":1,"column":25},"end":{"row":2,"column":3},"action":"insert","lines":["","   "]},{"start":{"row":2,"column":61},"end":{"row":3,"column":3},"action":"insert","lines":["","   "]},{"start":{"row":3,"column":34},"end":{"row":4,"column":3},"action":"insert","lines":["","   "]},{"start":{"row":4,"column":69},"end":{"row":4,"column":70},"action":"remove","lines":[" "]},{"start":{"row":4,"column":69},"end":{"row":5,"column":0},"action":"insert","lines":["",""]},{"start":{"row":5,"column":29},"end":{"row":6,"column":3},"action":"insert","lines":["","   "]},{"start":{"row":6,"column":39},"end":{"row":7,"column":7},"action":"insert","lines":["","       "]},{"start":{"row":7,"column":43},"end":{"row":8,"column":7},"action":"insert","lines":["","       "]},{"start":{"row":8,"column":51},"end":{"row":9,"column":7},"action":"insert","lines":["","       "]},{"start":{"row":9,"column":49},"end":{"row":10,"column":7},"action":"insert","lines":["","       "]},{"start":{"row":10,"column":31},"end":{"row":11,"column":3},"action":"insert","lines":["","   "]},{"start":{"row":11,"column":64},"end":{"row":12,"column":7},"action":"insert","lines":["","       "]},{"start":{"row":12,"column":41},"end":{"row":13,"column":7},"action":"insert","lines":["","       "]},{"start":{"row":13,"column":47},"end":{"row":14,"column":7},"action":"insert","lines":["","       "]},{"start":{"row":15,"column":0},"end":{"row":15,"column":8},"action":"insert","lines":["        "]},{"start":{"row":15,"column":35},"end":{"row":16,"column":11},"action":"insert","lines":["","           "]},{"start":{"row":16,"column":46},"end":{"row":17,"column":11},"action":"insert","lines":["","           "]},{"start":{"row":17,"column":46},"end":{"row":18,"column":11},"action":"insert","lines":["","           "]},{"start":{"row":18,"column":42},"end":{"row":19,"column":11},"action":"insert","lines":["","           "]},{"start":{"row":19,"column":43},"end":{"row":20,"column":11},"action":"insert","lines":["","           "]},{"start":{"row":20,"column":39},"end":{"row":21,"column":11},"action":"insert","lines":["","           "]},{"start":{"row":21,"column":33},"end":{"row":22,"column":11},"action":"insert","lines":["","           "]},{"start":{"row":22,"column":35},"end":{"row":23,"column":11},"action":"insert","lines":["","           "]},{"start":{"row":23,"column":38},"end":{"row":24,"column":7},"action":"insert","lines":["","       "]},{"start":{"row":24,"column":10},"end":{"row":25,"column":7},"action":"insert","lines":["","       "]},{"start":{"row":25,"column":67},"end":{"row":26,"column":3},"action":"insert","lines":["","   "]},{"start":{"row":26,"column":8},"end":{"row":26,"column":9},"action":"remove","lines":[" "]},{"start":{"row":26,"column":8},"end":{"row":27,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":69},"end":{"row":5,"column":0},"action":"insert","lines":["",""]},{"start":{"row":5,"column":0},"end":{"row":5,"column":4},"action":"insert","lines":["    "]}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":7,"column":39},"end":{"row":7,"column":39},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1421245380794,"hash":"5bdd2779abcadc4ef01e1f7e5cf693c840d71348"}